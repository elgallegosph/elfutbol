<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Torneo Pro - Registro</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #eee; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
        body.modo-visitante .solo-admin { display: none; }
        input, button { width: 100%; padding: 10px; margin: 5px 0; box-sizing: border-box; }
        button { background: #1a5276; color: white; border: none; cursor: pointer; font-weight: bold; }
        .btn-reg { background: #7f8c8d; }
    </style>
</head>
<body class="modo-visitante" id="mainBody">

<div class="container">
    <h1>üèÜ Gesti√≥n de Torneo</h1>
    <div id="status" style="text-align:center; padding:10px;">Modo Espectador</div>

    <div class="solo-admin">
        <h3>Panel de Control</h3>
        <input type="text" id="nombreEquipo" placeholder="Nombre Equipo">
        <button onclick="registrarEquipo()">A√±adir Equipo</button>
        <div id="listaEquipos"></div>
        <hr>
        <input type="text" id="nombreTorneo" placeholder="Nombre del Torneo">
        <button onclick="crearTorneo()" style="background:green">Publicar en Firebase</button>
    </div>

    <div id="auth-box" style="margin-top:20px; border:1px solid #ccc; padding:15px;">
        <h3>Registro / Acceso</h3>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Contrase√±a">
        <button onclick="login()">Entrar</button>
        <button onclick="register()" class="btn-reg">Crear Cuenta Nueva</button>
        <button onclick="logout()" class="solo-admin" style="background:red">Salir</button>
    </div>
</div>

<script>
    let datosLocales = { equipos: [] };

    window.registrarEquipo = function() {
        const n = document.getElementById('nombreEquipo').value;
        if(!n) return;
        datosLocales.equipos.push(n);
        localStorage.setItem('torneo_data', JSON.stringify(datosLocales));
        document.getElementById('listaEquipos').innerText = "Equipos: " + datosLocales.equipos.join(', ');
    };

    window.cambiarModo = function(user) {
        const body = document.getElementById('mainBody');
        const st = document.getElementById('status');
        if(user) {
            body.classList.remove('modo-visitante');
            st.innerText = "Bienvenido: " + user.email;
            st.style.color = "green";
        } else {
            body.classList.add('modo-visitante');
            st.innerText = "Modo Espectador";
            st.style.color = "red";
        }
    };
</script>

<script type="module" src="app.js"></script>
</body>
</html>
